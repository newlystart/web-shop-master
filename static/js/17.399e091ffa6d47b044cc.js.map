{"version":3,"sources":["webpack:///src/pages/shopcart/shopcart.vue","webpack:///./src/pages/shopcart/shopcart.vue?e0e9","webpack:///./src/pages/shopcart/shopcart.vue"],"names":["shopcart","data","imageHost","cartProductVoList","recommendList","cartTotalPrice","allChecked","startX","endX","deleteProductId","popupTitle","popupShow","isLoading","beforeCreate","_this","this","Object","getData","then","res","status","$router","push","created","getCartList","mounted","_this2","$nextTick","setTimeout","methods","extends_default","vuex_esm","_this3","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","setConfig","getRecommendList","stop","selectProduct","$event","id","_this4","_callee2","_context2","parseInt","currentTarget","getAttribute","_this5","keyword","pageNum","pageSize","orderBy","list","selectAll","_this6","addCount","num","stock","_this7","alert","reduceCount","_this8","showDetail","e","console","log","className","touchStart","touches","clientX","touchEnd","$element","parentElement","changedTouches","dataset","type","resetSlide","listItems","document","querySelectorAll","i","length","deleteShopcart","ModalHelper","afterOpen","settleAccounts","productDetail","index","_this9","_callee3","footprintList","_context3","util","target","tagName","abrupt","unshift","RECORE_FOOT","confirmPopup","_this10","cancelPopup","beforeClose","goBack","go","components","navBar","loading","popup","shopcart_shopcart","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","directives","name","rawName","value","expression","attrs","loading-type","_l","item","data-type","productId","!touchstart","!touchend","data-selected","src","productMainImage","__webpack_require__","domProps","textContent","_s","productName","productSubtitle","class","active","quantity","productStock","_m","mainImage","price","popup-title","popup-show","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.399e091ffa6d47b044cc.js","sourcesContent":["<template>\n    <div class=\"shopcart-box\">\n        <header class=\"user-head\">\n            <i class=\"iconfont icon-left\" @click=\"goBack\"></i>\n            <span>购物车</span>\n            <i class=\"iconfont icon-More\"></i>\n        </header>\n        <loading v-show=\"isLoading\" :loading-type=\"2\"></loading>\n        <section v-show=\"!isLoading\">\n          <section class=\"shopcart-page\">\n            <div class=\"shopcart-list\">\n              <div class=\"shopcart-item\" v-for=\"item in cartProductVoList\" data-type=\"0\"\n                   @click=\"showDetail($event,item.productId)\">\n                <div class=\"shopcart-item-box\" @touchstart.capture=\"touchStart\" @touchend.capture=\"touchEnd\">\n                  <div class=\"shopcart-item-select\">\n                    <i class=\"iconfont icon-duigou\" data-selected=\"1\"\n                       @click=\"selectProduct($event,item.productId)\" v-if=\"item.productChecked\"></i>\n                    <i class=\"iconfont icon-weibiaoti38\" data-selected=\"0\"\n                       @click=\"selectProduct($event,item.productId)\" v-else></i>\n                  </div>\n                  <img :src=\"imageHost + item.productMainImage\" v-if=\"item.productMainImage\"/>\n                  <img src=\"../../assets/product_default.jpg\" v-else/>\n                  <div class=\"shopcart-item-info\">\n                    <p class=\"shopcart-name\" v-text=\"item.productName\"></p>\n                    <p class=\"shopcart-subtitle\" v-text=\"item.productSubtitle\"></p>\n                    <div class=\"shopcart-num\">\n                      <span class=\"shopcart-price\" v-text=\"`￥${item.productPrice}`\"></span>\n                      <div class=\"shopcart-quantity\">\n                        <i @click=\"reduceCount(item.productId,item.quantity,item.productStock)\"\n                           :class=\"{'active' : item.quantity === 1}\">-</i>\n                        <span>{{item.quantity}}</span>\n                        <i @click=\"addCount(item.productId,item.quantity)\"\n                           :class=\"{'active' : item.quantity === item.productStock}\">+</i>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"delete\" @click=\"deleteShopcart(item.productId)\">删除</div>\n              </div>\n            </div>\n            <div class=\"shopcart-footer\" v-if=\"cartProductVoList.length > 0\">\n              <div class=\"shopcart-item-select\" @click=\"selectAll\">\n                <i class=\"iconfont icon-duigou\" v-if=\"allChecked === true && cartProductVoList.length\"></i>\n                <i class=\"iconfont icon-weibiaoti38\" v-else></i>\n                <span>全选</span>\n              </div>\n              <div class=\"shopcart-accounts\">\n                <span>合计：<i v-text=\"`￥${cartTotalPrice}`\"></i></span>\n                <button @click=\"settleAccounts\" :class=\"{'active' : cartTotalPrice > 0}\">结算</button>\n              </div>\n            </div>\n            <div v-else>\n              <div class=\"shopcart-empty\">\n                <img src=\"//img11.360buyimg.com/jdphoto/s180x180_jfs/t18163/292/540553659/74408/adeb7463/5a93c51cN3bb5e37b.png\">\n                <p>购物车空空如也，去逛逛吧~</p>\n              </div>\n            </div>\n            <div class=\"recommend-title\">\n              <span></span>\n              <i>可能你还想要</i>\n              <span></span>\n            </div>\n            <div class=\"shopcart-recommend\">\n              <div class=\"recommend-list\">\n                <div class=\"recommend-item\" v-for=\"(item,index) in recommendList\"\n                     @click=\"productDetail($event,index)\">\n                  <img :src=\"item.imageHost+item.mainImage\" v-if=\"item.imageHost && item.mainImage\"/>\n                  <img src=\"../../assets/product_default.jpg\" v-else/>\n                  <p>{{item.name}}</p>\n                  <div>\n                    <span class=\"price\">￥{{item.price}}</span>\n                    <i class=\"iconfont icon-gouwuche\"></i>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n          <nav-bar></nav-bar>\n        </section>\n        <popup :popup-title=\"popupTitle\"\n               :popup-show=\"popupShow\"\n               @cancelPopup=\"cancelPopup\"\n               @confirmPopup=\"confirmPopup\"></popup>\n    </div>\n</template>\n\n<script>\n    import navBar from '../../components/navBar'\n    import loading from '../../components/common/loading'\n    import popup from '../../components/common/popup'\n    import {getStore, dedupeObject} from \"../../common/js/util\";\n    import {\n        checkLogin,\n        cartList,\n        selectProduct,\n        unSelectProduct,\n        selectAll,\n        unSelectAll,\n        deleteProduct,\n        updateCartCount,\n        productListKeyword,\n        addCart\n    } from \"../../service/getData\";\n    import {mapMutations} from 'vuex'\n\n    export default {\n        data() {\n            return {\n                imageHost: '',\n                cartProductVoList: [],\n                recommendList: [],\n                cartTotalPrice: 0,\n                allChecked: false,\n                startX: 0,\n                endX: 0,\n                deleteProductId: 0,\n                popupTitle: '',\n                popupShow: false,\n                isLoading: true\n            }\n        },\n        beforeCreate() {\n            checkLogin().then((res) => {\n                if (res.status === 1) {\n                    this.$router.push('./login')\n                    return\n                }\n            })\n        },\n        created() {\n            this.getCartList()\n        },\n        mounted(){\n            this.$nextTick(()=>{\n                setTimeout(()=>{\n                    this.isLoading = false\n                },500)\n            })\n        },\n        methods: {\n            ...mapMutations([\n                'RECORE_FOOT'\n            ]),\n            async getCartList() {\n                await cartList().then((res) => {\n                    this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                })\n                this.getRecommendList()\n            },\n            //取消/选中商品\n            async selectProduct($event, id) {\n                let $selected = parseInt($event.currentTarget.getAttribute('data-selected'))\n                if (!$selected) {\n                    await selectProduct(id).then((res) => {\n                        this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                    })\n                } else {\n                    await unSelectProduct(id).then((res) => {\n                        this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                    })\n                }\n                this.getCartList()\n            },\n            getRecommendList() {\n                let params = {\n                    keyword: '1',\n                    pageNum: 1,\n                    pageSize: 6,\n                    orderBy: 'default'\n                }\n                productListKeyword(params).then((res) => {\n                    this.recommendList = res.data.list\n                })\n            },\n            selectAll() {\n                if (this.allChecked) {\n                    unSelectAll().then((res) => {\n                        this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                    })\n                } else {\n                    selectAll().then((res) => {\n                        this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                    })\n                }\n            },\n            //增减商品数量\n            addCount(id, num, stock) {\n                if (num === stock) {  //数量不超过库存数\n                    alert('超过该商品的库存量')\n                    return\n                }\n                num++\n                updateCartCount(id, num).then((res) => {\n                    this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                })\n            },\n            reduceCount(id, num) {\n                if (num === 1) {   //数量最小为1\n                    alert('该商品1件起售')\n                    return\n                }\n                num--\n                updateCartCount(id, num).then((res) => {\n                    this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                })\n            },\n            showDetail(e, id) {\n                console.log(e.currentTarget.className)\n                console.log(id)\n            },\n            setConfig(imageHost, cartProductVoList, cartTotalPrice, allChecked) {\n                this.imageHost = imageHost\n                this.cartProductVoList = cartProductVoList\n                this.cartTotalPrice = cartTotalPrice\n                this.allChecked = allChecked\n            },\n            //滑动开始\n            touchStart(e) {\n                // 记录初始位置\n                this.startX = e.touches[0].clientX\n            },\n            //滑动结束\n            touchEnd(e) {\n                let $element = e.currentTarget.parentElement\n                this.endX = e.changedTouches[0].clientX\n                if ($element.dataset.type == 0 && this.startX - this.endX > 30) {\n                    this.resetSlide()\n                    $element.dataset.type = 1\n                }\n                // 右滑\n                if ($element.dataset.type == 1 && this.startX - this.endX < -30) {\n                    this.resetSlide()\n                    $element.dataset.type = 0\n                }\n                this.startX = 0;\n                this.endX = 0;\n            },\n            //复位滑动状态\n            resetSlide() {\n                let listItems = document.querySelectorAll('.shopcart-item');\n                // 复位\n                for (let i = 0; i < listItems.length; i++) {\n                    listItems[i].dataset.type = 0\n                }\n            },\n            deleteShopcart(id) {\n                this.deleteProductId = id\n                this.popupTitle = '确定删除该商品吗？'\n                this.popupShow = true\n                ModalHelper.afterOpen()\n            },\n            //结算\n            settleAccounts() {\n                if (!this.cartTotalPrice) {\n                    return\n                }\n                this.$router.push('/order')\n            },\n            async productDetail(e, index) {\n                let footprintList = getStore('footprintList')\n                if (e.target.tagName === 'I') {\n                    await addCart(this.recommendList[index].id, 1).then(() => {\n                        // do nothing\n                    })\n                    this.getCartList()\n                    return\n                }\n                footprintList.unshift(this.recommendList[index])\n                this.RECORE_FOOT(dedupeObject(footprintList))\n                this.$router.push('./product/' + this.recommendList[index].id)\n            },\n            confirmPopup() {\n                deleteProduct(this.deleteProductId).then((res) => {\n                    this.setConfig(res.data.imageHost, res.data.cartProductVoList, res.data.cartTotalPrice, res.data.allChecked)\n                })\n                this.cancelPopup()\n            },\n            cancelPopup() {\n                ModalHelper.beforeClose()\n                this.popupShow = false\n                this.resetSlide()\n            },\n            goBack() {\n                this.$router.go(-1)\n            }\n        },\n        components: {\n            navBar,\n            loading,\n            popup\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped=\"\" type=\"text/scss\">\n    @import \"../../common/style/mixin\";\n\n    .shopcart-box {\n        background: #f7f7f7;\n        padding-bottom: 10%;\n        .user-head {\n            @include fj;\n            width: 100%;\n            height: 88px;\n            padding: 0 20px;\n            line-height: 88px;\n            font-size: 30px;\n            @include boxSizing;\n            border-bottom: 1px solid #dcdcdc;\n            .iconfont {\n                font-size: 44px;\n            }\n        }\n        .shopcart-list {\n            width: 100%;\n            overflow: hidden;\n            background: #f7f7f7;\n            .shopcart-item {\n                position: relative;\n                -webkit-transition: all 0.2s;\n                transition: all 0.2s;\n                .shopcart-item-box {\n                    display: flex;\n                    margin-bottom: 20px;\n                    padding: 20px 0;\n                    background: #fff;\n                    .shopcart-item-select {\n                        width: 12%;\n                        height: 180px;\n                        line-height: 180px;\n                        text-align: center;\n                        .iconfont {\n                            display: inline-block;\n                            width: 100%;\n                            height: 100%;\n                            font-size: 40px;\n                            &.icon-duigou {\n                                color: $red;\n                            }\n                            &.icon-weibiaoti38 {\n                                color: #999;\n                            }\n                        }\n                    }\n                    img {\n                        width: 180px;\n                        height: 180px;\n                    }\n                    .shopcart-item-info {\n                        width: 60%;\n                        margin-left: 20px;\n                        line-height: 40px;\n                        .shopcart-name {\n                            height: 80px;\n                            overflow: hidden;\n                        }\n                        .shopcart-subtitle {\n                            color: #999;\n                            height: 40px;\n                            overflow: hidden;\n                        }\n                        .shopcart-num {\n                            @include fj;\n                            padding-top: 10px;\n                            font-size: 30px;\n                            .shopcart-price {\n                                color: $red;\n                            }\n                            .shopcart-quantity {\n                                @include fj;\n                                width: 210px;\n                                height: 60px;\n                                line-height: 60px;\n                                color: #999;\n                                background: #fff;\n                                span {\n                                    width: 80px;\n                                    height: 100%;\n                                    text-align: center;\n                                    line-height: 60px;\n                                    background: #F7F7F7;\n                                }\n                                i {\n                                    width: 60px;\n                                    height: 100%;\n                                    text-align: center;\n                                    line-height: 60px;\n                                    font-style: normal;\n                                    font-size: 50px;\n                                    background: #F7F7F7;\n                                    &.active {\n                                        color: #dcdcdc;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                .delete {\n                    position: absolute;\n                    right: -260px;\n                    top: 0;\n                    width: 260px;\n                    height: 220px;\n                    text-align: center;\n                    line-height: 220px;\n                    font-size: 32px;\n                    color: #fff;\n                    background: red;\n                    z-index: 1000;\n                }\n            }\n        }\n        .shopcart-footer {\n            @include fj;\n            position: fixed;\n            left: 0;\n            bottom: 100px;\n            width: 100%;\n            height: 100px;\n            line-height: 100px;\n            background: #fff;\n            .shopcart-item-select {\n                width: 150px;\n                height: 100%;\n                text-align: center;\n                .iconfont {\n                    display: inline-block;\n                    height: 100%;\n                    font-size: 40px;\n                    &.icon-duigou {\n                        color: $red;\n                    }\n                    &.icon-weibiaoti38 {\n                        color: #999;\n                    }\n                }\n                span {\n                    padding-left: 10px;\n                    color: #666;\n                }\n            }\n            .shopcart-accounts {\n                height: 100%;\n                span {\n                    font-size: 30px;\n                    i {\n                        padding: 0 10px;\n                        font-style: normal;\n                        color: $red;\n                    }\n                }\n                button {\n                    width: 240px;\n                    height: 100%;\n                    text-align: center;\n                    font-size: 30px;\n                    color: #fff;\n                    background: #DADADA;\n                }\n                button.active {\n                    background: $red;\n                }\n            }\n        }\n        .shopcart-empty {\n            width: 100%;\n            padding: 60px 0;\n            text-align: center;\n            background: #F7F7F7;\n            p {\n                font-size: 30px;\n                padding-top: 20px;\n                color: rgba(51, 51, 51, .66);\n            }\n        }\n        .recommend-title {\n            @include fj;\n            width: 100%;\n            padding: 30px;\n            @include boxSizing;\n            color: #ccc;\n            span {\n                flex: 3;\n                height: 1px;\n                margin-top: 14px;\n                background: #ccc;\n            }\n            i {\n                flex: 2;\n                font-style: normal;\n                text-align: center;\n                color: #999;\n            }\n        }\n        .shopcart-recommend {\n            width: 100%;\n            background: #fff;\n            margin-bottom: 200px;\n            .recommend-list {\n                display: flex;\n                flex-shrink: 0;\n                flex-wrap: wrap;\n                .recommend-item {\n                    display: flex;\n                    flex-direction: column;\n                    width: 50%;\n                    padding: 20px 30px;\n                    @include boxSizing;\n                    border-bottom: 1px solid #dcdcdc;\n                    &:nth-child(2n-1) {\n                        border-right: 1px solid #dcdcdc;\n                    }\n                    img {\n                        width: 314px;\n                        height: 314px;\n                    }\n                    p {\n                        margin: 30px 0 10px 0;\n                        height: 80px;\n                        line-height: 40px;\n                        overflow: hidden;\n                    }\n                    div {\n                        @include fj;\n                        width: 100%;\n                        font-size: 30px;\n                        span {\n                            color: $red;\n                        }\n                        .iconfont {\n                            font-size: 34px;\n                            color: $red;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    .shopcart-item[data-type=\"0\"] {\n        transform: translate3d(0, 0, 0);\n    }\n\n    .shopcart-item[data-type=\"1\"] {\n        transform: translate3d(-260px, 0, 0);\n    }\n\n    .shopcart-item:after {\n        content: \" \";\n        position: absolute;\n        left: 0.2rem;\n        bottom: 0;\n        right: 0;\n        height: 1px;\n        border-bottom: 1px solid #ccc;\n        color: #ccc;\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scaleY(0.5);\n        transform: scaleY(0.5);\n        z-index: 2;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/shopcart/shopcart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopcart-box\"},[_c('header',{staticClass:\"user-head\"},[_c('i',{staticClass:\"iconfont icon-left\",on:{\"click\":_vm.goBack}}),_vm._v(\" \"),_c('span',[_vm._v(\"购物车\")]),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-More\"})]),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}],attrs:{\"loading-type\":2}}),_vm._v(\" \"),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}]},[_c('section',{staticClass:\"shopcart-page\"},[_c('div',{staticClass:\"shopcart-list\"},_vm._l((_vm.cartProductVoList),function(item){return _c('div',{staticClass:\"shopcart-item\",attrs:{\"data-type\":\"0\"},on:{\"click\":function($event){return _vm.showDetail($event,item.productId)}}},[_c('div',{staticClass:\"shopcart-item-box\",on:{\"!touchstart\":function($event){return _vm.touchStart($event)},\"!touchend\":function($event){return _vm.touchEnd($event)}}},[_c('div',{staticClass:\"shopcart-item-select\"},[(item.productChecked)?_c('i',{staticClass:\"iconfont icon-duigou\",attrs:{\"data-selected\":\"1\"},on:{\"click\":function($event){return _vm.selectProduct($event,item.productId)}}}):_c('i',{staticClass:\"iconfont icon-weibiaoti38\",attrs:{\"data-selected\":\"0\"},on:{\"click\":function($event){return _vm.selectProduct($event,item.productId)}}})]),_vm._v(\" \"),(item.productMainImage)?_c('img',{attrs:{\"src\":_vm.imageHost + item.productMainImage}}):_c('img',{attrs:{\"src\":require(\"../../assets/product_default.jpg\")}}),_vm._v(\" \"),_c('div',{staticClass:\"shopcart-item-info\"},[_c('p',{staticClass:\"shopcart-name\",domProps:{\"textContent\":_vm._s(item.productName)}}),_vm._v(\" \"),_c('p',{staticClass:\"shopcart-subtitle\",domProps:{\"textContent\":_vm._s(item.productSubtitle)}}),_vm._v(\" \"),_c('div',{staticClass:\"shopcart-num\"},[_c('span',{staticClass:\"shopcart-price\",domProps:{\"textContent\":_vm._s((\"￥\" + (item.productPrice)))}}),_vm._v(\" \"),_c('div',{staticClass:\"shopcart-quantity\"},[_c('i',{class:{'active' : item.quantity === 1},on:{\"click\":function($event){return _vm.reduceCount(item.productId,item.quantity,item.productStock)}}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.quantity))]),_vm._v(\" \"),_c('i',{class:{'active' : item.quantity === item.productStock},on:{\"click\":function($event){return _vm.addCount(item.productId,item.quantity)}}},[_vm._v(\"+\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteShopcart(item.productId)}}},[_vm._v(\"删除\")])])}),0),_vm._v(\" \"),(_vm.cartProductVoList.length > 0)?_c('div',{staticClass:\"shopcart-footer\"},[_c('div',{staticClass:\"shopcart-item-select\",on:{\"click\":_vm.selectAll}},[(_vm.allChecked === true && _vm.cartProductVoList.length)?_c('i',{staticClass:\"iconfont icon-duigou\"}):_c('i',{staticClass:\"iconfont icon-weibiaoti38\"}),_vm._v(\" \"),_c('span',[_vm._v(\"全选\")])]),_vm._v(\" \"),_c('div',{staticClass:\"shopcart-accounts\"},[_c('span',[_vm._v(\"合计：\"),_c('i',{domProps:{\"textContent\":_vm._s((\"￥\" + _vm.cartTotalPrice))}})]),_vm._v(\" \"),_c('button',{class:{'active' : _vm.cartTotalPrice > 0},on:{\"click\":_vm.settleAccounts}},[_vm._v(\"结算\")])])]):_c('div',[_vm._m(0)]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"shopcart-recommend\"},[_c('div',{staticClass:\"recommend-list\"},_vm._l((_vm.recommendList),function(item,index){return _c('div',{staticClass:\"recommend-item\",on:{\"click\":function($event){return _vm.productDetail($event,index)}}},[(item.imageHost && item.mainImage)?_c('img',{attrs:{\"src\":item.imageHost+item.mainImage}}):_c('img',{attrs:{\"src\":require(\"../../assets/product_default.jpg\")}}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.price))]),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-gouwuche\"})])])}),0)])]),_vm._v(\" \"),_c('nav-bar')],1),_vm._v(\" \"),_c('popup',{attrs:{\"popup-title\":_vm.popupTitle,\"popup-show\":_vm.popupShow},on:{\"cancelPopup\":_vm.cancelPopup,\"confirmPopup\":_vm.confirmPopup}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopcart-empty\"},[_c('img',{attrs:{\"src\":\"//img11.360buyimg.com/jdphoto/s180x180_jfs/t18163/292/540553659/74408/adeb7463/5a93c51cN3bb5e37b.png\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"购物车空空如也，去逛逛吧~\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommend-title\"},[_c('span'),_vm._v(\" \"),_c('i',[_vm._v(\"可能你还想要\")]),_vm._v(\" \"),_c('span')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-0d0e9968\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/shopcart/shopcart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d0e9968\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./shopcart.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./shopcart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./shopcart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d0e9968\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./shopcart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0d0e9968\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/shopcart/shopcart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}